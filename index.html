<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KPWVZKSD');</script>
    <!-- End Google Tag Manager -->

    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Collection Form</title>
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 500px; margin: auto; }
        label { display: block; margin-top: 10px; font-weight: bold; }
        input { width: 100%; padding: 8px; margin-top: 5px; margin-bottom: 10px; }
        button { background-color: #0073b1; color: white; padding: 10px 20px; border: none; cursor: pointer; }
        button:hover { background-color: #005582; }
    </style>

    <script>
        async function hashEmail(email) {
            const encoder = new TextEncoder();
            const data = encoder.encode(email.toLowerCase());
            const hashBuffer = await crypto.subtle.digest('SHA-256', data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        async function updateHashedEmail() {
            const emailInput = document.getElementById('email').value;
            const hashedEmail = await hashEmail(emailInput);
            document.getElementById('hashed_email').value = hashedEmail;
        }

        function setLiFatId() {
            const li_fat_id = (new URLSearchParams(window.location.search)).get("li_fat_id");
            document.getElementById('li_fat_id').value = li_fat_id;
        }

        function submitHandler(event) {
            event.preventDefault();
            document.getElementById('message').textContent = "Your Signup information has been submitted.";
        }

        window.onload = function() {
            setLiFatId();
            updateHashedEmail();
        };
    </script>

    
</head>
<body>

    
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KPWVZKSD"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <h2>Submit User Data</h2>
    
    <form id="capiDemoForm" name="capiDemoForm" action="https://formspree.io/f/xwpzgrrv" method="POST">

        <label for="li_fat_id">li_fat_id</label>
        <input type="text" id="li_fat_id" name="li_fat_id" placeholder="LinkedIn First Party Cookie ID">

        <label for="firstname">First Name</label>
        <input type="text" id="firstname" name="firstname" required>

        <label for="lastname">Last Name</label>
        <input type="text" id="lastname" name="lastname" required>

        <label for="email">Email</label>
        <input type="email" id="email" name="email" required>

        <label for="hashed_email">Hashed Email (SHA-256)</label>
        <input type="text" id="hashed_email" name="hashed_email" placeholder="Optional if auto-generated">

        <label for="jobtitle">Job Title</label>
        <input type="text" id="jobtitle" name="jobtitle">

        <label for="company">Company</label>
        <input type="text" id="company" name="company">

        <label for="country">Country Code (ISO2)</label>
        <input type="text" id="country" name="country" placeholder="e.g., US, AU, GB">

        <label for="currency">Currency</label>
        <input type="text" id="currency" name="currency" placeholder="e.g., USD">

        <label for="value">Value</label>
        <input type="number" step="0.01" id="value" name="value" placeholder="0.00">

        <button type="submit">Submit Data</button>
        <button type="reset" style="background-color: #666; margin-left: 10px;">Reset</button>
    </form>

</body>
</html>
